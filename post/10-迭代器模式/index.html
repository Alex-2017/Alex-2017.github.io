<!doctype html>
<html lang="zh-CN">
<head>

    <meta charset="utf-8">
    <meta name="generator" content="Hugo 0.53" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>迭代器模式 | Alex的博客</title>
    <meta property="og:title" content="迭代器模式 - Alex的博客">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content="2019-03-23T21:15:15&#43;08:00">
        
        
    <meta property="article:modified_time" content="2019-03-23T21:15:15&#43;08:00">
        
    <meta name="Keywords" content="Java,设计模式">
    <meta name="description" content="迭代器模式">
        <meta name="author" content="Alex">
        
    <meta property="og:url" content="https://wangjc95.com/post/10-%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href="/css/normalize.css">
    
        <link rel="stylesheet" href="/css/prism.css">
    
    <link rel="stylesheet" href="/css/style.css">
    <script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>

    


    
    
</head>

<body>
<header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://wangjc95.com">
                        Alex的博客
                    </a>
                
                <p class="description">Java程序猿</p>
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="current" href="https://wangjc95.com">首页</a>
                    
                    <a  href="https://wangjc95.com/archives/" title="归档">归档</a>
                    
                    <a  href="https://wangjc95.com/about/" title="About">About</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>


<div id="body">
    <div class="container">
        <div class="col-group">

            <div class="col-8" id="main">
                <div class="res-cons">
                    <article class="post">
                        <header>
                            <h1 class="post-title">迭代器模式</h1>
                        </header>
                        <date class="post-meta meta-date">
                            2019年3月23日
                        </date>
                        
                        <div class="post-meta">
                            <span>|</span>
                            
                                <span class="meta-category"><a href="https://wangjc95.com/categories/java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F">java设计模式</a></span>
                            
                        </div>
                        
                        
                        <div class="post-meta">
                            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span> 阅读</span></span>
                        </div>
                        
                        <div class="post-content">
                            

<p><strong>介绍:</strong> 这是阅读<code>head first design patterns</code>的阅读笔记.</p>

<h1 id="1-场景介绍">1.场景介绍</h1>

<p>有两种菜单,分别是<code>DinerMenu</code>和<code>PancakeHouseMenu</code>.将这两种菜单整合,需要一个特定的服务员类<code>Waitress</code>来进行整合和菜单的遍历等功能.</p>

<p><code>MenuItem.java</code></p>

<pre><code class="language-java">package iterator;

import lombok.Data;

/**
 * 菜单
 */
@Data
public class MenuItem {
    //名称
    private String name;
    //描述
    private String description;
    //是否是素食
    private boolean vegetarian;
    //价格
    private double price;

    public MenuItem(String name, String description, boolean vegetarian, double price) {
        this.name = name;
        this.description = description;
        this.vegetarian = vegetarian;
        this.price = price;
    }
}

</code></pre>

<p><code>DinerMenu.java</code></p>

<pre><code class="language-java">package iterator;

/**
 * 餐厅菜单
 */
public class DinerMenu {

    //用数组存储餐厅菜单
    private MenuItem[] menuItems;
    private final int MAX_ITEMS = 6;
    private int numberOfItems = 0;

    public DinerMenu() {
        menuItems = new MenuItem[MAX_ITEMS];
        addMenuItem(&quot;Diner1&quot;,&quot;This is Diner1&quot;,true,10);
        addMenuItem(&quot;Diner2&quot;,&quot;This is Diner2&quot;,false,9.5);
        addMenuItem(&quot;Diner3&quot;,&quot;This is Diner3&quot;,true,9);
        addMenuItem(&quot;Diner4&quot;,&quot;This is Diner4&quot;,false,8.5);
    }

    public void addMenuItem(String name, String desc, boolean vegetarian, double price) {
        if (numberOfItems &gt;= MAX_ITEMS) {
            System.out.println(&quot;Sorry!The MenuItems Is Full!&quot;);
        } else {
            MenuItem menuItem = new MenuItem(name, desc, vegetarian, price);
            menuItems[numberOfItems] = menuItem;
            numberOfItems += 1;
        }
    }

    //获取菜单
    public MenuItem[] getMenuItems() {
        return menuItems;
    }
}

</code></pre>

<p><code>PancakeHouseMenu.java</code></p>

<pre><code class="language-java">package iterator;

import java.util.ArrayList;
import java.util.List;

/**
 * 煎饼菜单
 */
public class PancakeHouseMenu {

    //煎饼菜单集合
    private ArrayList&lt;MenuItem&gt; menuItems;

    public PancakeHouseMenu() {
        menuItems = new ArrayList&lt;&gt;();
        addMenuItem(&quot;Pancake1&quot;,&quot;This is pancake1&quot;,false,2.0);
        addMenuItem(&quot;Pancake2&quot;,&quot;This is pancake2&quot;,true,3.0);
        addMenuItem(&quot;Pancake3&quot;,&quot;This is pancake3&quot;,false,2.5);
        addMenuItem(&quot;Pancake4&quot;,&quot;This is pancake4&quot;,true,1.5);

    }

    public void addMenuItem(String name,String description,boolean vegetarian,double price) {
        MenuItem menuItem = new MenuItem(name, description, vegetarian, price);
        menuItems.add(menuItem);
    }

    //获取菜单
    public List&lt;MenuItem&gt; getMenuItems() {
        return menuItems;
    }
}

</code></pre>

<p><code>Waitress.java</code></p>

<pre><code class="language-java">package iterator;

import java.util.List;

/**
 * 服务员
 * 整合煎饼菜单和餐厅菜单.针对两种不同的菜单集合分别进行遍历.
 */
public class Waitress {

    private PancakeHouseMenu pancakeHouseMenu;
    private DinerMenu dinerMenu;

    public Waitress(PancakeHouseMenu pancakeHouseMenu, DinerMenu dinerMenu) {
        this.pancakeHouseMenu = pancakeHouseMenu;
        this.dinerMenu = dinerMenu;
    }

    public void printMenu() {
        List&lt;MenuItem&gt; pancakeMenuItems = pancakeHouseMenu.getMenuItems();
        for (int i = 0; i &lt; pancakeMenuItems.size(); i++) {
            System.out.println(pancakeMenuItems.get(i));
        }
        MenuItem[] dinerMenuItems = dinerMenu.getMenuItems();
        for (int i = 0; i &lt; dinerMenuItems.length; i++) {
            MenuItem dinerMenuItem = dinerMenuItems[i];
            if (dinerMenuItem != null) {
                System.out.println(dinerMenuItem);
            }
        }
    }
}

</code></pre>

<p><code>Waitress</code>不仅负责了聚合两种不同的菜单,还要根据菜单集合的不同数据结构来进行遍历.如果以后还要添加新的菜单,将会导致<code>Waitress</code>大幅度的更改.此时就需要将这些不同的遍历实现封装起来.</p>

<h1 id="2-解决方案">2.解决方案</h1>

<h2 id="2-1类图">2.1类图</h2>

<p><img src="https://raw.githubusercontent.com/Alex-2017/image-respository/master/img/20190324135136.png" alt="" /></p>

<h2 id="2-2代码实现-基于先前的代码做修改">2.2代码实现(基于先前的代码做修改)</h2>

<p><code>Iterator.java</code></p>

<pre><code class="language-java">public interface Iterator {

    //是否还有下个值
    boolean hasNext();

    //返回接下来的值
    Object next();

}
</code></pre>

<p><code>PancakeHouseMenuIterator.java</code></p>

<pre><code class="language-java">package iterator;

import java.util.List;

//煎饼菜单迭代器
public class PancakeHouseMenuIterator implements Iterator {

    private List&lt;MenuItem&gt; dinerMenuList;
    private int index = 0;

    public PancakeHouseMenuIterator(List&lt;MenuItem&gt; dinerMenuList) {
        this.dinerMenuList = dinerMenuList;
    }


    @Override
    public boolean hasNext() {
        if (index &gt;= dinerMenuList.size()) {
            return false;
        } else {
            return true;
        }
    }

    @Override
    public Object next() {
        MenuItem menuItem = dinerMenuList.get(index);
        index += 1;
        return menuItem;
    }
}

</code></pre>

<p><code>DinerMenuIterator.java</code></p>

<pre><code class="language-java">package iterator;

/**
 * 餐厅菜单迭代器
 */
public class DinerMenuIterator implements Iterator {

    private MenuItem[] menuItems;
    private int index = 0;

    public DinerMenuIterator(MenuItem[] menuItems) {
        this.menuItems = menuItems;
    }

    @Override
    public boolean hasNext() {
        if (index &gt;= menuItems.length || menuItems[index] == null) {
            return false;
        }
        return true;
    }

    @Override
    public Object next() {
        MenuItem menuItem = menuItems[index];
        index += 1;
        return menuItem;
    }
}

</code></pre>

<p><code>PancakeHouseMenu.java</code>新增代码</p>

<pre><code class="language-java">    //获取迭代器
    public Iterator createIterator() {
        return new PancakeHouseMenuIterator(menuItems);
    }
</code></pre>

<p><code>DinerMenu.java</code>新增代码</p>

<pre><code class="language-java"> public Iterator createIterator() {
        return new DinerMenuIterator(menuItems);
    }
</code></pre>

<p><code>Waitress2.java</code></p>

<pre><code class="language-java">package iterator;

/**
 * 服务员2
 * 整合煎饼菜单迭代器和餐厅菜单迭代器.针对两种不同的菜单迭代器进行遍历.
 */
public class Waitress2 {
    private PancakeHouseMenu pancakeHouseMenu;

    private DinerMenu dinerMenu;

    public Waitress2(PancakeHouseMenu pancakeHouseMenu, DinerMenu dinerMenu) {
        this.pancakeHouseMenu = pancakeHouseMenu;
        this.dinerMenu = dinerMenu;
    }

    public void printMenu() {
        Iterator pancakeIterator = pancakeHouseMenu.createIterator();
        Iterator dinerMenuIterator = dinerMenu.createIterator();
        System.out.println(&quot;==========Breakfast==========&quot;);
        forEachIterator(pancakeIterator);
        System.out.println(&quot;==========Diner==========&quot;);
        forEachIterator(dinerMenuIterator);
    }

    private void forEachIterator(Iterator iterator) {
        while (iterator.hasNext()) {
            System.out.println(iterator.next());
        }
    }
}

</code></pre>

<p><strong>测试代码:</strong></p>

<pre><code class="language-java">        //初始化菜单
        PancakeHouseMenu houseMenu = new PancakeHouseMenu();
        DinerMenu dinerMenu = new DinerMenu();
        //初始化服务员
        Waitress2 waitress2 = new Waitress2(houseMenu, dinerMenu);
        //输出菜单
        waitress2.printMenu();
</code></pre>

<p><strong>控制台输出:</strong></p>

<pre><code>==========Breakfast==========
MenuItem(name=Pancake1, description=This is pancake1, vegetarian=false, price=2.0)
MenuItem(name=Pancake2, description=This is pancake2, vegetarian=true, price=3.0)
MenuItem(name=Pancake3, description=This is pancake3, vegetarian=false, price=2.5)
MenuItem(name=Pancake4, description=This is pancake4, vegetarian=true, price=1.5)
==========Diner==========
MenuItem(name=Diner1, description=This is Diner1, vegetarian=true, price=10.0)
MenuItem(name=Diner2, description=This is Diner2, vegetarian=false, price=9.5)
MenuItem(name=Diner3, description=This is Diner3, vegetarian=true, price=9.0)
MenuItem(name=Diner4, description=This is Diner4, vegetarian=false, price=8.5)
</code></pre>

<h1 id="3-迭代器模式">3.迭代器模式</h1>

<h2 id="3-1定义">3.1定义</h2>

<p><strong>迭代器模式</strong>提供一种方法顺序访问一个聚合对象中的各个元素,而又不暴露其内部的表示.</p>

<h2 id="3-2特点">3.2特点</h2>

<ul>
<li>迭代器模式允许访问聚合的元素,而不需要暴露它的内部结构.</li>
<li>迭代器将遍历聚合的工作封装进一个对象中.</li>
<li>当使用迭代器的时候,我们依赖聚合提供遍历.</li>
<li>迭代器提供了一个通用的接口,让我们遍历聚合的项,当我们编码使用聚合的项时,就可以使用多态机制.</li>
</ul>

<h2 id="3-3设计原则">3.3设计原则</h2>

<p>一个类应该只有一个引起变化的原因.</p>

<p>我们知道要避免类内的改变,因为修改代码很容易造成许多潜在的错误.如果有一个类具有两个及以上改变的原因,那么这会使得将来该类的变化机率上升,而当他真的改变时,你的设计中同时有多个方面将会受到影响.</p>

<ul>
<li>类的每个责任都有改变的潜在区域.超过一个责任,意味着超过一个改变的区域.</li>
<li>这个原则告诉我们,尽量让每个类保持单一责任.</li>
</ul>

                        </div>

                        


                        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/post/9-%E6%A8%A1%E7%89%88%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F/">模版方法模式</a></li>
        
        <li><a href="/post/8-%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F/">外观模式</a></li>
        
        <li><a href="/post/7-%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/">适配器模式</a></li>
        
        <li><a href="/post/6-%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F/">命令模式</a></li>
        
        <li><a href="/post/5-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/">单例模式</a></li>
        
    </ul>
</div>


                        <div class="post-meta meta-tags">
                            
                            <ul class="clearfix">
                                
                                <li><a href="https://wangjc95.com/tags/head-first-design-patterns%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0">head first design patterns读书笔记</a></li>
                                
                            </ul>
                            
                        </div>
                    </article>
                    
    

    
    
    <div class="post bg-white">
      <script src="https://utteranc.es/client.js"
            repo= "Alex-2017/comment"
            issue-term="pathname"
            theme="github-light"
            crossorigin="anonymous"
            async>
      </script>
    </div>
    
                </div>
            </div>
            <div id="secondary">
    <section class="widget">
        <form id="search" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://wangjc95.com">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://wangjc95.com/post/11-%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F/" title="组合模式">组合模式</a>
    </li>
    
    <li>
        <a href="https://wangjc95.com/post/10-%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F/" title="迭代器模式">迭代器模式</a>
    </li>
    
    <li>
        <a href="https://wangjc95.com/post/9-%E6%A8%A1%E7%89%88%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F/" title="模版方法模式">模版方法模式</a>
    </li>
    
    <li>
        <a href="https://wangjc95.com/post/8-%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F/" title="外观模式">外观模式</a>
    </li>
    
    <li>
        <a href="https://wangjc95.com/post/7-%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/" title="适配器模式">适配器模式</a>
    </li>
    
    <li>
        <a href="https://wangjc95.com/post/6-%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F/" title="命令模式">命令模式</a>
    </li>
    
    <li>
        <a href="https://wangjc95.com/post/5-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/" title="单例模式">单例模式</a>
    </li>
    
    <li>
        <a href="https://wangjc95.com/post/4-%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/" title="工厂模式">工厂模式</a>
    </li>
    
    <li>
        <a href="https://wangjc95.com/post/3-%E8%A3%85%E9%A5%B0%E8%80%85%E6%A8%A1%E5%BC%8F/" title="装饰者模式">装饰者模式</a>
    </li>
    
    <li>
        <a href="https://wangjc95.com/post/2-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/" title="观察者模式">观察者模式</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">分类</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://wangjc95.com/categories/java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">java设计模式(11)</a>
    </li>
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title">标签</h3>
<div class="tagcloud">
    
    <a href="https://wangjc95.com/tags/head-first-design-patterns%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/">head-first-design-patterns读书笔记</a>
    
</div>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://wangjc95.com/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
        </div>
    </div>
</div>
<footer id="footer">
    <div class="container">
        &copy; 2019 <a href="https://wangjc95.com">Alex的博客 By Alex</a>.
        Powered by <a rel="nofollow noreferer noopener" href="https://gohugo.io" target="_blank">Hugo</a>.
        <a href="https://www.flysnow.org/" target="_blank">Theme</a> based on <a href="https://github.com/rujews/maupassant-hugo" target="_blank">maupassant</a>.
        
    </div>
</footer>


    <script type="text/javascript">
    
    (function(){
        $("pre code").parent().addClass("line-numbers")
    }())

    window.MathJax = {
        tex2jax: {
            inlineMath: [ ['$','$'] ],
            processEscapes: true
        }
    };
    </script>
    <script type="text/javascript" src="/js/prism.js" async="true"></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src="/js/totop.js?v=0.0.0" async=""></script>



<script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




</body>
</html>
